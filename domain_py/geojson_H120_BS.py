# BUffered 100m and Simplified 15.9% (~149 vertices)
geo_json_geometry = {
  "type": "Polygon",
  "coordinates": [
    [
      [
        -119.35732851026832,
        37.85233798830092
      ],
      [
        -119.35760627960931,
        37.8517605426622
      ],
      [
        -119.35760625658446,
        37.85018389202391
      ],
      [
        -119.35738943782628,
        37.84965478505118
      ],
      [
        -119.35676770934539,
        37.84904676452941
      ],
      [
        -119.35600052519028,
        37.84771034079176
      ],
      [
        -119.35440918748057,
        37.84671648297715
      ],
      [
        -119.35371729961346,
        37.84571754236369
      ],
      [
        -119.3536617327636,
        37.84518350201925
      ],
      [
        -119.35297157489963,
        37.84445564075809
      ],
      [
        -119.35227173925549,
        37.84428372686147
      ],
      [
        -119.35149504723336,
        37.843766077627514
      ],
      [
        -119.35121725659289,
        37.84289357138734
      ],
      [
        -119.35149502599161,
        37.84231609791517
      ],
      [
        -119.35127822601548,
        37.84132145344089
      ],
      [
        -119.35019376233227,
        37.84028897543253
      ],
      [
        -119.34932178015278,
        37.839883340171006
      ],
      [
        -119.34852897728378,
        37.839839283899934
      ],
      [
        -119.34786179476036,
        37.840011199248025
      ],
      [
        -119.34744944720066,
        37.84046128115764
      ],
      [
        -119.34739388454788,
        37.84099530703455
      ],
      [
        -119.34683831687741,
        37.841850559721934
      ],
      [
        -119.34683830127187,
        37.84293975741407
      ],
      [
        -119.34656051497879,
        37.843517226369464
      ],
      [
        -119.34656049937186,
        37.84460642916044
      ],
      [
        -119.34594395310562,
        37.845210344596076
      ],
      [
        -119.34574049727253,
        37.84567262618791
      ],
      [
        -119.34380677457645,
        37.84567262132761
      ],
      [
        -119.34313953381242,
        37.84584453166208
      ],
      [
        -119.34261060868735,
        37.84632145706514
      ],
      [
        -119.34239380277218,
        37.84685055944192
      ],
      [
        -119.3423937938765,
        37.84747580383404
      ],
      [
        -119.3417506228703,
        37.847788980198246
      ],
      [
        -119.34094391722408,
        37.84854367983562
      ],
      [
        -119.33983278733595,
        37.85021034698677
      ],
      [
        -119.33933818459523,
        37.85129500343286
      ],
      [
        -119.33939373688226,
        37.85203870797414
      ],
      [
        -119.33989372060185,
        37.8526157616377
      ],
      [
        -119.33994927264212,
        37.85342759655375
      ],
      [
        -119.34079724976277,
        37.854283737399726
      ],
      [
        -119.33984483656725,
        37.85432779025097
      ],
      [
        -119.33939481785572,
        37.854561520542354
      ],
      [
        -119.33714011617558,
        37.85456151529156
      ],
      [
        -119.33633926642754,
        37.854839295777424
      ],
      [
        -119.33512261310189,
        37.85488334854216
      ],
      [
        -119.33467259907493,
        37.85511707282337
      ],
      [
        -119.33401149853626,
        37.855161127509724
      ],
      [
        -119.33344384194156,
        37.855488126114814
      ],
      [
        -119.3314993745277,
        37.85743257276768
      ],
      [
        -119.33128253776763,
        37.857961670356154
      ],
      [
        -119.33128251816666,
        37.859328699630524
      ],
      [
        -119.33100992024062,
        37.8598801439874
      ],
      [
        -119.33050473783263,
        37.860461284544904
      ],
      [
        -119.33044916078198,
        37.86099537181758
      ],
      [
        -119.32983266043875,
        37.86159924000347
      ],
      [
        -119.32933802582319,
        37.86268389292919
      ],
      [
        -119.32933799028125,
        37.86516205093534
      ],
      [
        -119.32872150135013,
        37.865765907318824
      ],
      [
        -119.32850982442663,
        37.86626905675699
      ],
      [
        -119.32788815585901,
        37.86687701852457
      ],
      [
        -119.32767129135472,
        37.86740611436448
      ],
      [
        -119.32767127643018,
        37.86842720926828
      ],
      [
        -119.32844367396366,
        37.869789639013845
      ],
      [
        -119.32901142707416,
        37.87011664248866
      ],
      [
        -119.32961569421312,
        37.870160703243265
      ],
      [
        -119.3291157074715,
        37.87073906287171
      ],
      [
        -119.32883909635544,
        37.871505970617086
      ],
      [
        -119.3274179015269,
        37.8715059673077
      ],
      [
        -119.32675043662724,
        37.87167787601725
      ],
      [
        -119.32610283078036,
        37.872339301546305
      ],
      [
        -119.32511031255322,
        37.87271035228476
      ],
      [
        -119.32316584528965,
        37.87465479872525
      ],
      [
        -119.32294895596968,
        37.87539485985634
      ],
      [
        -119.32202818094909,
        37.87556676915076
      ],
      [
        -119.32161683663655,
        37.87595041549907
      ],
      [
        -119.32066582816819,
        37.87632146556037
      ],
      [
        -119.3204489365047,
        37.876850558368986
      ],
      [
        -119.3205042956591,
        37.87750372575949
      ],
      [
        -119.32130838379508,
        37.87823209911664
      ],
      [
        -119.32197589552703,
        37.878404015160115
      ],
      [
        -119.32309645958894,
        37.87836016358495
      ],
      [
        -119.3243808458952,
        37.877848463797285
      ],
      [
        -119.32552410980558,
        37.87784846216812
      ],
      [
        -119.32619113964124,
        37.877676819075674
      ],
      [
        -119.32665398750694,
        37.87697798725891
      ],
      [
        -119.32738199103915,
        37.876502537070714
      ],
      [
        -119.32865200980869,
        37.87641572226717
      ],
      [
        -119.3294859719988,
        37.87613778308357
      ],
      [
        -119.3304750659904,
        37.87545432536891
      ],
      [
        -119.33114255687468,
        37.87562624257907
      ],
      [
        -119.33191299795922,
        37.875626242991146
      ],
      [
        -119.33258048968423,
        37.875454326293855
      ],
      [
        -119.33299301604583,
        37.87500424740888
      ],
      [
        -119.33283047438034,
        37.874188748369335
      ],
      [
        -119.33369022820199,
        37.87378844286442
      ],
      [
        -119.33401856903643,
        37.873470730496784
      ],
      [
        -119.33445730818241,
        37.87364446125938
      ],
      [
        -119.33466801324847,
        37.874143768810356
      ],
      [
        -119.33523518441578,
        37.87447084391676
      ],
      [
        -119.33606907190865,
        37.87474876611012
      ],
      [
        -119.33722918117132,
        37.87479316737431
      ],
      [
        -119.33756360407921,
        37.87576264494376
      ],
      [
        -119.33690355461196,
        37.875806494635874
      ],
      [
        -119.33645248974206,
        37.87604042483598
      ],
      [
        -119.3355870202288,
        37.87604042360137
      ],
      [
        -119.33491954259769,
        37.876212317397766
      ],
      [
        -119.3344513775194,
        37.87694050251924
      ],
      [
        -119.33445064772097,
        37.883030414119865
      ],
      [
        -119.33417351226983,
        37.88360724211013
      ],
      [
        -119.33417350126194,
        37.88444830613095
      ],
      [
        -119.33438993024161,
        37.884976887799695
      ],
      [
        -119.3347842123266,
        37.88528099554526
      ],
      [
        -119.33506198306387,
        37.88583655109844
      ],
      [
        -119.33575277212142,
        37.886655461132854
      ],
      [
        -119.33642037291627,
        37.88682737544192
      ],
      [
        -119.33737753299067,
        37.88678331129863
      ],
      [
        -119.33806401756749,
        37.88627182092999
      ],
      [
        -119.33924877961819,
        37.88627181697567
      ],
      [
        -119.33991636735664,
        37.88609989714526
      ],
      [
        -119.34044540420008,
        37.885622977416965
      ],
      [
        -119.34088324641615,
        37.8848829333828
      ],
      [
        -119.34230433612176,
        37.88488293006917
      ],
      [
        -119.34297191271136,
        37.884711009840146
      ],
      [
        -119.34380678102926,
        37.88488293069566
      ],
      [
        -119.34480432925707,
        37.88488293128979
      ],
      [
        -119.34547191040826,
        37.88471101270786
      ],
      [
        -119.34588449161586,
        37.88426093008117
      ],
      [
        -119.34594007145256,
        37.88372677886709
      ],
      [
        -119.34621192333738,
        37.88317904627272
      ],
      [
        -119.34727212019268,
        37.88266071082142
      ],
      [
        -119.34765528853875,
        37.88261665248157
      ],
      [
        -119.34870721740049,
        37.882068527078935
      ],
      [
        -119.34959972858681,
        37.88206109861418
      ],
      [
        -119.35074966438158,
        37.88165546029945
      ],
      [
        -119.35127869209546,
        37.881178536915435
      ],
      [
        -119.35149040984905,
        37.88067533694641
      ],
      [
        -119.35377866113642,
        37.87840076016146
      ],
      [
        -119.3539903691307,
        37.87789756991972
      ],
      [
        -119.3547720658218,
        37.877105160369695
      ],
      [
        -119.35572308811189,
        37.876734093470105
      ],
      [
        -119.35593996612246,
        37.8760172258248
      ],
      [
        -119.35572307116561,
        37.875488120170246
      ],
      [
        -119.35515525261047,
        37.87516111800971
      ],
      [
        -119.3553843817276,
        37.87407278113131
      ],
      [
        -119.35510659537616,
        37.873495404706325
      ],
      [
        -119.35505100755297,
        37.872961280446454
      ],
      [
        -119.35455102324198,
        37.87238429039903
      ],
      [
        -119.35449543231697,
        37.871572391520395
      ],
      [
        -119.35427322925818,
        37.87127317610463
      ],
      [
        -119.35421762709112,
        37.86962794643291
      ],
      [
        -119.35380511279526,
        37.869177864719525
      ],
      [
        -119.35316208397228,
        37.86900901750775
      ],
      [
        -119.35310649612126,
        37.86823905811876
      ],
      [
        -119.35260651052012,
        37.867753642183324
      ],
      [
        -119.35260647987168,
        37.86567127937479
      ],
      [
        -119.35282867874413,
        37.86537204348369
      ],
      [
        -119.35288423775158,
        37.864350558782135
      ],
      [
        -119.35316200630388,
        37.86370498705534
      ],
      [
        -119.35310641924622,
        37.86268350266005
      ],
      [
        -119.35288420916955,
        37.86238426017537
      ],
      [
        -119.35281853214481,
        37.86155668632285
      ],
      [
        -119.35316196574985,
        37.8609272097423
      ],
      [
        -119.35316194216229,
        37.859282410359555
      ],
      [
        -119.3537174851763,
        37.85842720938101
      ],
      [
        -119.35371747354061,
        37.857615749114444
      ],
      [
        -119.3544093471108,
        37.85661678972825
      ],
      [
        -119.35491612283494,
        37.85637768725239
      ],
      [
        -119.35655616483189,
        37.85478965159188
      ],
      [
        -119.35677297847504,
        37.85400464981437
      ],
      [
        -119.35732852190083,
        37.8531494314585
      ],
      [
        -119.35732851026832,
        37.85233798830092
      ]
    ]
  ]
}

# filter for items the overlap with our chosen geometry
geometry_filter = {
  "type": "GeometryFilter",
  "field_name": "geometry",
  "config": geo_json_geometry
}

# filter images acquired in a certain date range
date_range_filter = {
  "type": "DateRangeFilter",
  "field_name": "acquired",
  "config": {
    "gte": "2023-03-25T00:00:00.000Z",
    "lte": "2023-09-30T00:00:00.000Z"
  }
}

# filter any images which are more than 5% clouds
cloud_cover_filter = {
  "type": "RangeFilter",
  "field_name": "cloud_cover",
  "config": {
    "lte": 0.05
  }
}

# create a filter that combines our geo and date filters
# could also use an "OrFilter"
#domain = {
#  "type": "AndFilter",
#  "config": [geometry_filter, date_range_filter]
#}

# create a filter that combines our geo and date filters
# could also use an "OrFilter"
domain = {
  "type": "AndFilter",
  "config": [geometry_filter, date_range_filter, cloud_cover_filter]
}
