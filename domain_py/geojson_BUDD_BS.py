# BUffered 100m and Simplified 15.9% (~149 vertices)
geo_json_geometry = {
  "type": "Polygon",
  "coordinates": [
    [
      [
        -119.40707971121635,
        37.83903561188751
      ],
      [
        -119.40730684579943,
        37.83873239210008
      ],
      [
        -119.40736239753134,
        37.83845421297337
      ],
      [
        -119.40730713120018,
        37.837934990585204
      ],
      [
        -119.40714673289375,
        37.837684552730934
      ],
      [
        -119.40661744960792,
        37.83720681774057
      ],
      [
        -119.4061707906764,
        37.83706228499728
      ],
      [
        -119.4056957007009,
        37.83652396026558
      ],
      [
        -119.40564027860682,
        37.835712394522304
      ],
      [
        -119.40522892873783,
        37.8352625964234
      ],
      [
        -119.40464669760105,
        37.83490677558243
      ],
      [
        -119.40325666024458,
        37.833516650588855
      ],
      [
        -119.40300555447641,
        37.833317498579426
      ],
      [
        -119.40233840532362,
        37.83314557856336
      ],
      [
        -119.40120045981247,
        37.833189452297844
      ],
      [
        -119.40074973798656,
        37.83342336663941
      ],
      [
        -119.39793938854477,
        37.83342335930832
      ],
      [
        -119.39758936116988,
        37.83346722914184
      ],
      [
        -119.39713863720446,
        37.83370113744131
      ],
      [
        -119.39675601391734,
        37.83374501047378
      ],
      [
        -119.39630530060298,
        37.83397891575787
      ],
      [
        -119.39592267954201,
        37.83402278876337
      ],
      [
        -119.39542575957002,
        37.834293217406
      ],
      [
        -119.39449565583428,
        37.834705690026794
      ],
      [
        -119.39416778521671,
        37.83502306231137
      ],
      [
        -119.3935274995853,
        37.83536781385791
      ],
      [
        -119.39127271898825,
        37.83536780797825
      ],
      [
        -119.390922684809,
        37.83541167826323
      ],
      [
        -119.3904724664611,
        37.83564517936905
      ],
      [
        -119.3899125480483,
        37.835412168731914
      ],
      [
        -119.38952789686209,
        37.83536777282409
      ],
      [
        -119.3890785322863,
        37.835134215564665
      ],
      [
        -119.38872794088627,
        37.83509003174974
      ],
      [
        -119.38758282949857,
        37.83508951297152
      ],
      [
        -119.38713358616701,
        37.8348563099895
      ],
      [
        -119.38678283934514,
        37.83481225503066
      ],
      [
        -119.38432827087954,
        37.83481225652375
      ],
      [
        -119.38397824181735,
        37.83485612726421
      ],
      [
        -119.3831067671447,
        37.83526125122018
      ],
      [
        -119.38285576973514,
        37.83545965280176
      ],
      [
        -119.38146618314558,
        37.83684928410865
      ],
      [
        -119.38125368232289,
        37.83735318707963
      ],
      [
        -119.38102682288388,
        37.837655756741015
      ],
      [
        -119.38097061221062,
        37.838190544284004
      ],
      [
        -119.37991584335485,
        37.83932204770237
      ],
      [
        -119.37986479599284,
        37.839575236686784
      ],
      [
        -119.3795217028911,
        37.83990484056526
      ],
      [
        -119.37930917387753,
        37.84040884030247
      ],
      [
        -119.37908203459887,
        37.840712047676426
      ],
      [
        -119.379026474015,
        37.84099022085098
      ],
      [
        -119.37908172197587,
        37.84178721631345
      ],
      [
        -119.37930939500839,
        37.84209123121283
      ],
      [
        -119.37935949156743,
        37.84234277181028
      ],
      [
        -119.37958716385569,
        37.84264678480503
      ],
      [
        -119.3797976602772,
        37.84314876278526
      ],
      [
        -119.38013754692325,
        37.84347600666584
      ],
      [
        -119.38019280040307,
        37.84400943846647
      ],
      [
        -119.38042047040105,
        37.84431344560561
      ],
      [
        -119.38069308122162,
        37.84486489147395
      ],
      [
        -119.38074833166183,
        37.84567610507292
      ],
      [
        -119.38208193549073,
        37.84708710713428
      ],
      [
        -119.3821371917291,
        37.84762054975911
      ],
      [
        -119.38223797674327,
        37.84777789822029
      ],
      [
        -119.38208191884317,
        37.848211721440535
      ],
      [
        -119.38208137014152,
        37.84874640708128
      ],
      [
        -119.38180903230406,
        37.84929776086116
      ],
      [
        -119.38158190556132,
        37.8496009365124
      ],
      [
        -119.3815263304014,
        37.85039865743918
      ],
      [
        -119.38174346021573,
        37.851016310061716
      ],
      [
        -119.38158210696857,
        37.851267054153226
      ],
      [
        -119.38152609319606,
        37.851759761760306
      ],
      [
        -119.38088440241255,
        37.85192791970097
      ],
      [
        -119.38055638780536,
        37.852245396045696
      ],
      [
        -119.37991621256238,
        37.85259004458777
      ],
      [
        -119.37821716514537,
        37.852590040158404
      ],
      [
        -119.37755106741007,
        37.85276125252397
      ],
      [
        -119.37694525957566,
        37.853356515578994
      ],
      [
        -119.37643872309971,
        37.85359529180968
      ],
      [
        -119.3760262905832,
        37.85404538180041
      ],
      [
        -119.37597071997953,
        37.854323554138055
      ],
      [
        -119.37597036069499,
        37.85513504161095
      ],
      [
        -119.3753546268129,
        37.85573841627774
      ],
      [
        -119.37519323154368,
        37.855989091778774
      ],
      [
        -119.375137006735,
        37.85652417371833
      ],
      [
        -119.374915140414,
        37.856823160104376
      ],
      [
        -119.37486199535594,
        37.85735530657536
      ],
      [
        -119.37463735084611,
        37.857656493682825
      ],
      [
        -119.37458177775012,
        37.85793466541347
      ],
      [
        -119.37458176573433,
        37.858731990768376
      ],
      [
        -119.37463703409243,
        37.85900943678501
      ],
      [
        -119.37485953484519,
        37.859309290222846
      ],
      [
        -119.37485952237219,
        37.86012087943908
      ],
      [
        -119.37507522803187,
        37.860648759439705
      ],
      [
        -119.3754146191424,
        37.86097559703961
      ],
      [
        -119.37541439900812,
        37.86124665960155
      ],
      [
        -119.3751928496265,
        37.8615453844322
      ],
      [
        -119.37513727432852,
        37.86182355669549
      ],
      [
        -119.37513717018193,
        37.86873198838769
      ],
      [
        -119.3751924452592,
        37.8690094346013
      ],
      [
        -119.37541493931381,
        37.86930925944539
      ],
      [
        -119.3754149225631,
        37.87039865712445
      ],
      [
        -119.37547019953548,
        37.870676102815864
      ],
      [
        -119.37583435351854,
        37.87108869743835
      ],
      [
        -119.37671520260987,
        37.87195960261108
      ],
      [
        -119.37709201376516,
        37.87209539764582
      ],
      [
        -119.37833432340904,
        37.87275535455685
      ],
      [
        -119.3784704380674,
        37.87292036042287
      ],
      [
        -119.37847042131389,
        37.87400976820632
      ],
      [
        -119.37852570109149,
        37.87428721430728
      ],
      [
        -119.37972333389386,
        37.87553325084371
      ],
      [
        -119.37979839585255,
        37.87573888491839
      ],
      [
        -119.37958149749811,
        37.876267998542474
      ],
      [
        -119.3796367757026,
        37.87678721480555
      ],
      [
        -119.3798592631314,
        37.877087014669534
      ],
      [
        -119.37985924210166,
        37.878454213440065
      ],
      [
        -119.37991482285145,
        37.87873238678312
      ],
      [
        -119.38032738651398,
        37.87918248276218
      ],
      [
        -119.38099493936994,
        37.87935440403665
      ],
      [
        -119.38157752618208,
        37.879310528177214
      ],
      [
        -119.38189361907882,
        37.879183182292444
      ],
      [
        -119.38270120825048,
        37.878428244114076
      ],
      [
        -119.3828626465104,
        37.878177566022124
      ],
      [
        -119.3829188627801,
        37.87764981906024
      ],
      [
        -119.38341736891928,
        37.87740996147194
      ],
      [
        -119.38407823557056,
        37.877365900826575
      ],
      [
        -119.38464606843424,
        37.877038885742216
      ],
      [
        -119.38486295379649,
        37.87650976897482
      ],
      [
        -119.38480765997532,
        37.87599055187728
      ],
      [
        -119.38464718189793,
        37.87574011946835
      ],
      [
        -119.38472178577709,
        37.875532238891466
      ],
      [
        -119.38547937405515,
        37.874816665244566
      ],
      [
        -119.3856406763559,
        37.87456572036494
      ],
      [
        -119.38569624641852,
        37.87376799829885
      ],
      [
        -119.38554011667323,
        37.87333317944846
      ],
      [
        -119.38591825050425,
        37.87289949247934
      ],
      [
        -119.38597400689322,
        37.872621456695974
      ],
      [
        -119.38597465102681,
        37.871808981482644
      ],
      [
        -119.38652458546424,
        37.870702425021484
      ],
      [
        -119.38805492201806,
        37.86914352945237
      ],
      [
        -119.38841791623334,
        37.868733498721824
      ],
      [
        -119.38846899630036,
        37.868480211409015
      ],
      [
        -119.38893133482485,
        37.867965524427206
      ],
      [
        -119.39018859255212,
        37.867921644650224
      ],
      [
        -119.39068830207944,
        37.867649176904074
      ],
      [
        -119.39158332070316,
        37.8676881241639
      ],
      [
        -119.39203291743685,
        37.86792146264794
      ],
      [
        -119.39273546664465,
        37.867965523008266
      ],
      [
        -119.39310525019876,
        37.86834915408323
      ],
      [
        -119.39377270722389,
        37.86852107888873
      ],
      [
        -119.39463303401357,
        37.86847720422732
      ],
      [
        -119.39550463765629,
        37.868072079819264
      ],
      [
        -119.39603463488324,
        37.867594680185604
      ],
      [
        -119.39625170884224,
        37.867065804347234
      ],
      [
        -119.39625230277332,
        37.86616214897957
      ],
      [
        -119.3970747394233,
        37.865706657909364
      ],
      [
        -119.39745019157921,
        37.86557143089927
      ],
      [
        -119.397862703179,
        37.86512144682545
      ],
      [
        -119.39791834342378,
        37.864843323789884
      ],
      [
        -119.39791922246279,
        37.86185441943097
      ],
      [
        -119.39900508014723,
        37.861854416329805
      ],
      [
        -119.39967125457991,
        37.861683191358644
      ],
      [
        -119.40047856458558,
        37.860928491306325
      ],
      [
        -119.40096889724364,
        37.859868997960575
      ],
      [
        -119.40152440806557,
        37.85875802812064
      ],
      [
        -119.40214519859468,
        37.8581507143094
      ],
      [
        -119.40235775214262,
        37.8576467842043
      ],
      [
        -119.40258443015719,
        37.85734461279658
      ],
      [
        -119.40263554118346,
        37.85709113250474
      ],
      [
        -119.40286254430931,
        37.85678821989978
      ],
      [
        -119.40291822157765,
        37.85651012834992
      ],
      [
        -119.40291902495576,
        37.85486438575319
      ],
      [
        -119.40314022272857,
        37.85456616289037
      ],
      [
        -119.4031959659365,
        37.85428812312212
      ],
      [
        -119.40319660993339,
        37.853475637524866
      ],
      [
        -119.40341798083043,
        37.85317727410098
      ],
      [
        -119.40347372300086,
        37.85289923422706
      ],
      [
        -119.40347436682968,
        37.85208694640934
      ],
      [
        -119.40361028159879,
        37.85192128101841
      ],
      [
        -119.40411560972767,
        37.85168319673086
      ],
      [
        -119.40452821077018,
        37.851298865385786
      ],
      [
        -119.4049111058268,
        37.851254895238505
      ],
      [
        -119.40547844722215,
        37.85092849295078
      ],
      [
        -119.40569094660043,
        37.85042472616366
      ],
      [
        -119.40603399222155,
        37.85009516068563
      ],
      [
        -119.40624648941687,
        37.849591396027435
      ],
      [
        -119.40659018758507,
        37.84926111941235
      ],
      [
        -119.40680699635287,
        37.848731991970205
      ],
      [
        -119.40680694669057,
        37.845434664222005
      ],
      [
        -119.40675167827771,
        37.84515721233135
      ],
      [
        -119.4065291600572,
        37.84485731882525
      ],
      [
        -119.40647388864684,
        37.8443238797498
      ],
      [
        -119.40625136977216,
        37.84402398329327
      ],
      [
        -119.40625135304697,
        37.8429346648701
      ],
      [
        -119.4061960867167,
        37.84265721280906
      ],
      [
        -119.40597356643089,
        37.842357311335924
      ],
      [
        -119.40591769792701,
        37.84178868258396
      ],
      [
        -119.40597389698974,
        37.84125376828503
      ],
      [
        -119.40652414649853,
        37.84014684896832
      ],
      [
        -119.40675084951855,
        37.83984461417662
      ],
      [
        -119.40680191573787,
        37.83959129550898
      ],
      [
        -119.40702861955423,
        37.83928905869106
      ],
      [
        -119.40707971121635,
        37.83903561188751
      ]
    ]
  ]
}

# filter for items the overlap with our chosen geometry
geometry_filter = {
  "type": "GeometryFilter",
  "field_name": "geometry",
  "config": geo_json_geometry
}

# filter images acquired in a certain date range
date_range_filter = {
  "type": "DateRangeFilter",
  "field_name": "acquired",
  "config": {
    "gte": "2020-03-25T00:00:00.000Z", # 03-25 to 09-30 for 8b NDVI comp i did 09-15 to 09-30
    "lte": "2020-09-30T00:00:00.000Z"
  }
}

# filter any images which are more than 5% clouds
cloud_cover_filter = {
  "type": "RangeFilter",
  "field_name": "cloud_cover",
  "config": {
    "lte": 0.05
  }
}

# create a filter that combines our geo and date filters
# could also use an "OrFilter"
#domain = {
#  "type": "AndFilter",
#  "config": [geometry_filter, date_range_filter]
#}

# create a filter that combines our geo and date filters
# could also use an "OrFilter"
domain = {
  "type": "AndFilter",
  "config": [geometry_filter, date_range_filter, cloud_cover_filter]
}
