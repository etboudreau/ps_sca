# BUffered 100m and Simplified to 30.8% of effected area?
# Use mapshaper.org to simplify and geojson.io to get coordinates
geo_json_geometry = {
  "type": "Polygon",
  "coordinates": [
    [
      [
        10.077083333333333,
        46.62625
      ],
      [
        10.076527777777777,
        46.62569444444444
      ],
      [
        10.075694444444443,
        46.625416666666666
      ],
      [
        10.074305555555554,
        46.625416666666666
      ],
      [
        10.07347222222222,
        46.62513888888889
      ],
      [
        10.072916666666664,
        46.624583333333334
      ],
      [
        10.071805555555555,
        46.62430555555555
      ],
      [
        10.067083333333333,
        46.62430555555555
      ],
      [
        10.066527777777777,
        46.62486111111111
      ],
      [
        10.064583333333331,
        46.62486111111111
      ],
      [
        10.064583333333331,
        46.624583333333334
      ],
      [
        10.062638888888888,
        46.624583333333334
      ],
      [
        10.062361111111109,
        46.624027777777776
      ],
      [
        10.060416666666665,
        46.624027777777776
      ],
      [
        10.059027777777777,
        46.622638888888886
      ],
      [
        10.058472222222221,
        46.62236111111111
      ],
      [
        10.056527777777776,
        46.620416666666664
      ],
      [
        10.056527777777776,
        46.61986111111111
      ],
      [
        10.055694444444443,
        46.61958333333333
      ],
      [
        10.053749999999999,
        46.61958333333333
      ],
      [
        10.052916666666665,
        46.619305555555556
      ],
      [
        10.05097222222222,
        46.619305555555556
      ],
      [
        10.050138888888887,
        46.619027777777774
      ],
      [
        10.04986111111111,
        46.61958333333333
      ],
      [
        10.048749999999998,
        46.61986111111111
      ],
      [
        10.04736111111111,
        46.61986111111111
      ],
      [
        10.04736111111111,
        46.62013888888889
      ],
      [
        10.042638888888888,
        46.62013888888889
      ],
      [
        10.04236111111111,
        46.61958333333333
      ],
      [
        10.041249999999998,
        46.619305555555556
      ],
      [
        10.03736111111111,
        46.619305555555556
      ],
      [
        10.03736111111111,
        46.61958333333333
      ],
      [
        10.035694444444443,
        46.61958333333333
      ],
      [
        10.035694444444443,
        46.619305555555556
      ],
      [
        10.03347222222222,
        46.619305555555556
      ],
      [
        10.03347222222222,
        46.619027777777774
      ],
      [
        10.031527777777777,
        46.619027777777774
      ],
      [
        10.031527777777777,
        46.61875
      ],
      [
        10.030138888888887,
        46.61875
      ],
      [
        10.029305555555554,
        46.617916666666666
      ],
      [
        10.027916666666664,
        46.617916666666666
      ],
      [
        10.027916666666664,
        46.61819444444444
      ],
      [
        10.023749999999998,
        46.61819444444444
      ],
      [
        10.023194444444442,
        46.61875
      ],
      [
        10.021527777777777,
        46.61875
      ],
      [
        10.021527777777777,
        46.619027777777774
      ],
      [
        10.017638888888888,
        46.619027777777774
      ],
      [
        10.017638888888888,
        46.619305555555556
      ],
      [
        10.016249999999998,
        46.619305555555556
      ],
      [
        10.014305555555554,
        46.61736111111111
      ],
      [
        10.012638888888887,
        46.61736111111111
      ],
      [
        10.012638888888887,
        46.617916666666666
      ],
      [
        10.010694444444443,
        46.617916666666666
      ],
      [
        10.010694444444443,
        46.616527777777776
      ],
      [
        10.00986111111111,
        46.61541666666667
      ],
      [
        10.00875,
        46.61430555555555
      ],
      [
        10.00875,
        46.60819444444444
      ],
      [
        10.009305555555555,
        46.60680555555555
      ],
      [
        10.010138888888887,
        46.60597222222222
      ],
      [
        10.010138888888887,
        46.60319444444444
      ],
      [
        10.00986111111111,
        46.60208333333333
      ],
      [
        10.010138888888887,
        46.601527777777775
      ],
      [
        10.009027777777776,
        46.60125
      ],
      [
        10.00847222222222,
        46.60069444444444
      ],
      [
        10.00847222222222,
        46.599583333333335
      ],
      [
        10.007083333333332,
        46.598194444444445
      ],
      [
        10.006805555555554,
        46.59708333333333
      ],
      [
        10.005972222222221,
        46.59652777777778
      ],
      [
        10.005694444444442,
        46.59569444444444
      ],
      [
        10.005694444444442,
        46.59486111111111
      ],
      [
        10.006527777777777,
        46.59458333333333
      ],
      [
        10.006527777777777,
        46.594027777777775
      ],
      [
        10.00736111111111,
        46.59375
      ],
      [
        10.00736111111111,
        46.592638888888885
      ],
      [
        10.007916666666665,
        46.59236111111111
      ],
      [
        10.007916666666665,
        46.58958333333333
      ],
      [
        10.00736111111111,
        46.58763888888889
      ],
      [
        10.00736111111111,
        46.58569444444444
      ],
      [
        10.007083333333332,
        46.58486111111111
      ],
      [
        10.005972222222221,
        46.58375
      ],
      [
        10.005138888888887,
        46.58402777777778
      ],
      [
        10.005138888888887,
        46.58263888888889
      ],
      [
        10.00486111111111,
        46.58263888888889
      ],
      [
        10.00486111111111,
        46.57930555555556
      ],
      [
        10.004583333333331,
        46.57875
      ],
      [
        10.005138888888887,
        46.578472222222224
      ],
      [
        10.005138888888887,
        46.577083333333334
      ],
      [
        10.005972222222221,
        46.57625
      ],
      [
        10.005972222222221,
        46.575694444444444
      ],
      [
        10.006527777777777,
        46.57541666666666
      ],
      [
        10.006249999999998,
        46.57458333333333
      ],
      [
        10.006249999999998,
        46.57375
      ],
      [
        10.005694444444442,
        46.57263888888889
      ],
      [
        10.003194444444443,
        46.570972222222224
      ],
      [
        10.00236111111111,
        46.570972222222224
      ],
      [
        10.002083333333331,
        46.56986111111111
      ],
      [
        10.001527777777776,
        46.56930555555555
      ],
      [
        10.001527777777776,
        46.56791666666667
      ],
      [
        10.001249999999999,
        46.566805555555554
      ],
      [
        10.000416666666665,
        46.56597222222222
      ],
      [
        9.99847222222222,
        46.56486111111111
      ],
      [
        9.997083333333332,
        46.56375
      ],
      [
        9.995416666666666,
        46.562083333333334
      ],
      [
        9.995416666666666,
        46.561527777777776
      ],
      [
        9.99347222222222,
        46.55958333333333
      ],
      [
        9.993194444444443,
        46.55902777777778
      ],
      [
        9.994305555555554,
        46.55847222222222
      ],
      [
        9.995694444444442,
        46.55847222222222
      ],
      [
        9.996527777777777,
        46.557916666666664
      ],
      [
        9.998194444444444,
        46.557916666666664
      ],
      [
        9.999861111111109,
        46.55736111111111
      ],
      [
        10.000138888888888,
        46.556805555555556
      ],
      [
        10.00097222222222,
        46.556527777777774
      ],
      [
        10.004583333333331,
        46.556527777777774
      ],
      [
        10.005694444444442,
        46.55625
      ],
      [
        10.007083333333332,
        46.556805555555556
      ],
      [
        10.007916666666665,
        46.55597222222222
      ],
      [
        10.007916666666665,
        46.555416666666666
      ],
      [
        10.009027777777776,
        46.55430555555555
      ],
      [
        10.010694444444443,
        46.55319444444444
      ],
      [
        10.012083333333331,
        46.552638888888886
      ],
      [
        10.01486111111111,
        46.552638888888886
      ],
      [
        10.01486111111111,
        46.55236111111111
      ],
      [
        10.017361111111109,
        46.55236111111111
      ],
      [
        10.01847222222222,
        46.55291666666667
      ],
      [
        10.019583333333332,
        46.55291666666667
      ],
      [
        10.020416666666666,
        46.552638888888886
      ],
      [
        10.020972222222222,
        46.552083333333336
      ],
      [
        10.021805555555554,
        46.55180555555555
      ],
      [
        10.022083333333331,
        46.551249999999996
      ],
      [
        10.026527777777776,
        46.551249999999996
      ],
      [
        10.027638888888887,
        46.550694444444446
      ],
      [
        10.02986111111111,
        46.550694444444446
      ],
      [
        10.030972222222221,
        46.55041666666666
      ],
      [
        10.031805555555554,
        46.54986111111111
      ],
      [
        10.033194444444442,
        46.54986111111111
      ],
      [
        10.033749999999998,
        46.549305555555556
      ],
      [
        10.037083333333332,
        46.549305555555556
      ],
      [
        10.037916666666666,
        46.54986111111111
      ],
      [
        10.039583333333331,
        46.54986111111111
      ],
      [
        10.03986111111111,
        46.549305555555556
      ],
      [
        10.041249999999998,
        46.54902777777777
      ],
      [
        10.041527777777777,
        46.54847222222222
      ],
      [
        10.043194444444444,
        46.54819444444444
      ],
      [
        10.045138888888888,
        46.54625
      ],
      [
        10.046249999999999,
        46.54597222222222
      ],
      [
        10.046805555555554,
        46.54541666666667
      ],
      [
        10.047083333333331,
        46.54430555555555
      ],
      [
        10.048194444444443,
        46.54430555555555
      ],
      [
        10.048472222222221,
        46.543749999999996
      ],
      [
        10.050694444444442,
        46.54430555555555
      ],
      [
        10.05097222222222,
        46.54486111111111
      ],
      [
        10.05347222222222,
        46.54486111111111
      ],
      [
        10.05347222222222,
        46.544583333333335
      ],
      [
        10.057638888888887,
        46.544583333333335
      ],
      [
        10.058194444444442,
        46.545138888888886
      ],
      [
        10.059583333333332,
        46.545138888888886
      ],
      [
        10.060416666666665,
        46.54569444444444
      ],
      [
        10.061805555555553,
        46.54569444444444
      ],
      [
        10.062638888888888,
        46.54680555555555
      ],
      [
        10.062638888888888,
        46.547916666666666
      ],
      [
        10.06486111111111,
        46.54958333333333
      ],
      [
        10.067083333333333,
        46.55041666666666
      ],
      [
        10.068194444444442,
        46.55041666666666
      ],
      [
        10.069305555555554,
        46.55152777777778
      ],
      [
        10.069305555555554,
        46.55291666666667
      ],
      [
        10.069027777777777,
        46.55375
      ],
      [
        10.069583333333332,
        46.55430555555555
      ],
      [
        10.069583333333332,
        46.55569444444444
      ],
      [
        10.070138888888888,
        46.55625
      ],
      [
        10.07097222222222,
        46.556527777777774
      ],
      [
        10.07097222222222,
        46.55736111111111
      ],
      [
        10.07125,
        46.558194444444446
      ],
      [
        10.071805555555555,
        46.55902777777778
      ],
      [
        10.07347222222222,
        46.560138888888886
      ],
      [
        10.074305555555554,
        46.56041666666667
      ],
      [
        10.076805555555554,
        46.56041666666667
      ],
      [
        10.07847222222222,
        46.56097222222222
      ],
      [
        10.078749999999998,
        46.561527777777776
      ],
      [
        10.079583333333332,
        46.56180555555555
      ],
      [
        10.080416666666665,
        46.562916666666666
      ],
      [
        10.081249999999999,
        46.562916666666666
      ],
      [
        10.08236111111111,
        46.563472222222224
      ],
      [
        10.082916666666666,
        46.564027777777774
      ],
      [
        10.082916666666666,
        46.56486111111111
      ],
      [
        10.084027777777777,
        46.56597222222222
      ],
      [
        10.08486111111111,
        46.56625
      ],
      [
        10.085416666666665,
        46.566805555555554
      ],
      [
        10.085416666666665,
        46.56763888888889
      ],
      [
        10.08486111111111,
        46.56791666666667
      ],
      [
        10.083194444444443,
        46.569583333333334
      ],
      [
        10.081249999999999,
        46.570972222222224
      ],
      [
        10.080416666666665,
        46.570972222222224
      ],
      [
        10.079583333333332,
        46.571527777777774
      ],
      [
        10.079027777777776,
        46.57263888888889
      ],
      [
        10.079027777777776,
        46.57486111111111
      ],
      [
        10.080694444444443,
        46.57513888888889
      ],
      [
        10.080694444444443,
        46.57541666666666
      ],
      [
        10.08236111111111,
        46.57541666666666
      ],
      [
        10.08236111111111,
        46.57513888888889
      ],
      [
        10.084583333333331,
        46.575694444444444
      ],
      [
        10.086805555555554,
        46.575694444444444
      ],
      [
        10.086805555555554,
        46.57597222222222
      ],
      [
        10.08875,
        46.57597222222222
      ],
      [
        10.08875,
        46.57625
      ],
      [
        10.090138888888887,
        46.57625
      ],
      [
        10.090138888888887,
        46.57652777777778
      ],
      [
        10.092083333333331,
        46.57652777777778
      ],
      [
        10.092083333333331,
        46.57680555555555
      ],
      [
        10.094583333333333,
        46.57680555555555
      ],
      [
        10.095138888888888,
        46.57736111111111
      ],
      [
        10.096249999999998,
        46.57736111111111
      ],
      [
        10.096805555555553,
        46.57819444444444
      ],
      [
        10.096805555555553,
        46.57958333333333
      ],
      [
        10.097361111111109,
        46.57986111111111
      ],
      [
        10.097361111111109,
        46.580416666666665
      ],
      [
        10.097916666666665,
        46.58069444444445
      ],
      [
        10.097916666666665,
        46.58125
      ],
      [
        10.099305555555555,
        46.58236111111111
      ],
      [
        10.100416666666666,
        46.58263888888889
      ],
      [
        10.101249999999999,
        46.58375
      ],
      [
        10.101249999999999,
        46.584583333333335
      ],
      [
        10.101805555555554,
        46.585138888888885
      ],
      [
        10.100138888888887,
        46.585972222222225
      ],
      [
        10.100138888888887,
        46.58763888888889
      ],
      [
        10.100694444444443,
        46.58875
      ],
      [
        10.101249999999999,
        46.589305555555555
      ],
      [
        10.100138888888887,
        46.59041666666666
      ],
      [
        10.099583333333332,
        46.59041666666666
      ],
      [
        10.097361111111109,
        46.592638888888885
      ],
      [
        10.097361111111109,
        46.59458333333333
      ],
      [
        10.097638888888888,
        46.59458333333333
      ],
      [
        10.097638888888888,
        46.59597222222222
      ],
      [
        10.097916666666665,
        46.59597222222222
      ],
      [
        10.097916666666665,
        46.59791666666666
      ],
      [
        10.099305555555555,
        46.598194444444445
      ],
      [
        10.099583333333332,
        46.598749999999995
      ],
      [
        10.100416666666666,
        46.59902777777778
      ],
      [
        10.100416666666666,
        46.59986111111111
      ],
      [
        10.100972222222222,
        46.60041666666667
      ],
      [
        10.100972222222222,
        46.601527777777775
      ],
      [
        10.100138888888887,
        46.60180555555556
      ],
      [
        10.100138888888887,
        46.60236111111111
      ],
      [
        10.099583333333332,
        46.60263888888889
      ],
      [
        10.098749999999999,
        46.60458333333333
      ],
      [
        10.098749999999999,
        46.60597222222222
      ],
      [
        10.100138888888887,
        46.60652777777778
      ],
      [
        10.100694444444443,
        46.607083333333335
      ],
      [
        10.100694444444443,
        46.607638888888886
      ],
      [
        10.101249999999999,
        46.60791666666667
      ],
      [
        10.101249999999999,
        46.60930555555555
      ],
      [
        10.102083333333331,
        46.61013888888889
      ],
      [
        10.101805555555554,
        46.61125
      ],
      [
        10.100972222222222,
        46.61152777777777
      ],
      [
        10.100972222222222,
        46.61208333333333
      ],
      [
        10.100138888888887,
        46.61263888888889
      ],
      [
        10.099305555555555,
        46.61263888888889
      ],
      [
        10.09597222222222,
        46.61597222222222
      ],
      [
        10.095694444444442,
        46.61680555555555
      ],
      [
        10.095694444444442,
        46.61847222222222
      ],
      [
        10.09597222222222,
        46.61847222222222
      ],
      [
        10.09597222222222,
        46.620694444444446
      ],
      [
        10.09486111111111,
        46.621805555555554
      ],
      [
        10.09486111111111,
        46.623194444444444
      ],
      [
        10.094305555555554,
        46.62347222222222
      ],
      [
        10.094305555555554,
        46.624027777777776
      ],
      [
        10.087916666666665,
        46.624027777777776
      ],
      [
        10.086249999999998,
        46.624583333333334
      ],
      [
        10.085416666666665,
        46.625416666666666
      ],
      [
        10.082638888888887,
        46.625416666666666
      ],
      [
        10.082638888888887,
        46.62569444444444
      ],
      [
        10.079861111111109,
        46.62569444444444
      ],
      [
        10.079861111111109,
        46.625972222222224
      ],
      [
        10.07847222222222,
        46.62625
      ],
      [
        10.077083333333333,
        46.62625
      ]
    ]
  ]
}

# filter for items the overlap with our chosen geometry
geometry_filter = {
  "type": "GeometryFilter",
  "field_name": "geometry",
  "config": geo_json_geometry
}

# filter images acquired in a certain date range
date_range_filter = {
  "type": "DateRangeFilter",
  "field_name": "acquired",
  "config": {
    "gte": "2020-05-15T00:00:00.000Z",
    "lte": "2020-05-28T00:00:00.000Z"
  }
}

# filter any images which are more than 5% clouds
cloud_cover_filter = {
  "type": "RangeFilter",
  "field_name": "cloud_cover",
  "config": {
    "lte": 0.05
  }
}

# create a filter that combines our geo and date filters
# could also use an "OrFilter"
#domain = {
#  "type": "AndFilter",
#  "config": [geometry_filter, date_range_filter]
#}

# create a filter that combines our geo and date filters
# could also use an "OrFilter"
domain = {
  "type": "AndFilter",
  "config": [geometry_filter, date_range_filter, cloud_cover_filter]
}
